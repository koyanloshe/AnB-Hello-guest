var APP_XMENU=APP_XMENU||{};(function(a){APP_XMENU={timeOutHoverMenu:[],timeOutHoverOutMenu:[],initialize:function(){APP_XMENU.event()},event:function(){APP_XMENU.window_resize();APP_XMENU.menu_event();APP_XMENU.window_scroll();APP_XMENU.tabs_position(5);APP_XMENU.windowLoad()},windowLoad:function(){a(window).load(function(){a("header.main-header .x-nav-menu").each(function(){var b=this;a("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this);APP_XMENU.process_tab_padding(this,b)})})})},window_scroll:function(){a(window).on("scroll",function(b){if(APP_XMENU.is_desktop()){a("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this)})}})},window_resize:function(){a(window).resize(function(){if(APP_XMENU.is_desktop()){APP_XMENU.tabs_position(5);a("header.main-header .x-nav-menu").each(function(){var b=this;a("header.main-header .x-nav-menu > li").each(function(){APP_XMENU.process_menu_position(this);APP_XMENU.process_tab_padding(this,b)})})}})},tabs_position:function(b){a("header.main-header ul.x-nav-menu").each(function(){if(a(this).hasClass("x-nav-vmenu")){return}a(".x-sub-menu-tab",this).each(function(){var d=a(this);var c=a(this).parent().outerWidth();if(a("> li.x-menu-active",this).length==0){a("> li:first-child",this).addClass("x-menu-active")}a("> li",this).each(function(){a("> ul",this).css("left",c+"px")});a("> li.x-menu-active",this).each(function(){APP_XMENU.tab_position(a(this))})});if(b>0){setTimeout(function(){APP_XMENU.tabs_position(b-1)},500)}})},tab_position:function(b){var c=0;if(a("> ul",b).length!=0){c=a("> ul",b).outerHeight()}b.parent().css("min-height",c+"px")},menu_event:function(){a("header.main-header .x-sub-menu-tab > li:first-child").addClass("x-menu-active");APP_XMENU.process_menu_mobile_click();a("header.main-header .x-nav-menu").each(function(){if(a(this).hasClass("x-nav-vmenu")){return}var b=APP_XMENU.get_transition_name(this);APP_XMENU.transition_menu(this,b,this);a(".x-sub-menu-tab > li",this).hover(function(){if(!APP_XMENU.is_desktop()){return}a("> li",a(this).parent()).removeClass("x-menu-active");a(this).addClass("x-menu-active");APP_XMENU.tab_position(a(this))},function(){})})},process_menu_mobile_click:function(){a(".header-mobile-nav li.x-menu-item, header.header-left li.x-menu-item").click(function(c){if(a("> ul.x-sub-menu",this).length==0){return}if(a(c.target).closest(a("> ul.x-sub-menu",this)).length>0){return}if(a(c.target).closest(a("> a > span",this)).length>0){var e="";if((typeof(c.target)!="undefined")&&(c.target!=null)&&(typeof(c.target.baseURI)!="undefined")&&(c.target.baseURI!=null)){var f=c.target.baseURI.split("#");if(f.length>0){e=f[0]}var b=a("> a.x-menu-a-text",this);if(b.length>0){var d=b.attr("href");if(d!="#"){if((typeof(d)!="undefined")&&(d!=null)){d=d.split("#")[0]}if(e!=d){return}}}}}c.preventDefault();a(this).toggleClass("x-sub-menu-open");a("> ul.x-sub-menu",this).slideToggle()})},process_tab_padding:function(e,c){if(!APP_XMENU.is_desktop()){return}if(a(c).hasClass("x-nav-vmenu")){return}var d=a(e);if(d.hasClass("x-item-menu-multi-column")){var b=a("> ul.x-sub-menu > li.x-tabs",d);if(b.length>0){a(" > ul.x-sub-menu",d).addClass("no-padding")}}a("> ul.x-sub-menu > li").each(function(){APP_XMENU.process_tab_padding(this,c)})},transition_menu:function(e,b,c){var d=a(e);if(a(c).hasClass("x-nav-vmenu")){return}a("> li.x-menu-item",d).each(function(){var h=APP_XMENU.get_transition_name(a("> ul",this));if(h==""){h=b}var f=300;if(h==""){f=200}var g=0;a(this).hover(function(){if(!APP_XMENU.is_desktop()){return}var i=a(this);g=i.prop("id");if(a(".main-menu").hasClass("x-nav-vmenu")){if(i.offset().top-jQuery(window).scrollTop()-a(window).outerHeight()/2>0){a("> ul",i).removeClass("x-drop-from-bottom").addClass("x-drop-from-bottom")}}if(typeof(APP_XMENU.timeOutHoverMenu[i.prop("id")])!="undefined"){clearTimeout(APP_XMENU.timeOutHoverMenu[i.prop("id")])}APP_XMENU.timeOutHoverMenu[i.prop("id")]=setTimeout(function(){i.addClass("x-active");if(h!=""){a("> ul",i).addClass(h)}},f)},function(){if(!APP_XMENU.is_desktop()){return}var i=a(this);g=0;if(a(".main-menu").hasClass("x-nav-vmenu")){if(i.offset().top-jQuery(window).scrollTop()-a(window).outerHeight()/2>0){a("> ul",i).removeClass("x-drop-from-bottom")}}clearTimeout(APP_XMENU.timeOutHoverMenu[i.prop("id")]);APP_XMENU.timeOutHoverOutMenu[i.prop("id")]=setTimeout(function(){if(g==i.prop("id")){return}if(i.hasClass("x-active")){a("> ul",i).addClass(h+"-out");setTimeout(function(){if(h!=""){a("> ul",i).removeClass(h);a("> ul",i).removeClass(h+"-out")}a(i).removeClass("x-active")},f)}},200)});if(!a(this).hasClass("x-item-menu-multi-column")){APP_XMENU.transition_menu(a("> ul.x-sub-menu",this),b,c)}})},get_transition_name:function(c){var b="";if(a(c).hasClass("x-animate-slide-up")){b="x-slide-up"}else{if(a(c).hasClass("x-animate-slide-down")){b="x-slide-down"}else{if(a(c).hasClass("x-animate-slide-left")){b="x-slide-left"}else{if(a(c).hasClass("x-animate-slide-right")){b="x-slide-right"}else{if(a(c).hasClass("x-animate-fade-in")){b="x-fade-in"}else{if(a(c).hasClass("x-animate-sign-flip")){b="x-sign-flip"}}}}}}return b},process_menu_position:function(e){if(a(".main-menu").hasClass("x-nav-vmenu")){return}var d=a(e);var b=a(".x-nav-menu");var c=a(e).parent();if(d.hasClass("x-pos-left-menu-parent")){APP_XMENU.process_position_left_menu_parent(e)}else{if(d.hasClass("x-pos-right-menu-parent")){APP_XMENU.process_position_right_menu_parent(e)}else{if(d.hasClass("x-pos-center-menu-parent")){APP_XMENU.process_position_center_menu_parent(e)}else{if(d.hasClass("x-pos-left-menu-bar")){APP_XMENU.process_position_left_menu_bar(e)}else{if(d.hasClass("x-pos-right-menu-bar")){APP_XMENU.process_position_right_menu_bar(e)}else{if(d.hasClass("x-pos-full")){}else{APP_XMENU.process_position_right_menu_parent(e)}}}}}}},get_margin_left:function(d){var b=a(d).css("margin-left");try{b=parseInt(b.replace("px",""),10)}catch(c){b=0}return b},process_position_left_menu_parent:function(g){var f=a(g);var b=a("header.main-header .x-nav-menu");while((b.prop("tagName")!="BODY")&&(b.css("position")=="static")){b=b.parent()}var e=a("> ul.x-sub-menu",f);if(e.length==0){return}if(b.outerWidth()<=e.outerWidth()){e.css("left","0");e.css("right","0")}else{var c=APP_XMENU.get_margin_left(g);var d=b.outerWidth()-a(g).outerWidth()-a(g).position().left-c;if(a(g).outerWidth()+a(g).position().left+c<e.outerWidth()){e.css("left","0");e.css("right","auto")}else{e.css("left","auto");e.css("right",d+"px")}}},process_position_right_menu_parent:function(f){var e=a(f);var b=a("header.main-header .x-nav-menu");while((b.prop("tagName")!="BODY")&&(b.css("position")=="static")){b=b.parent()}var d=a("> ul.x-sub-menu",e);if(d.length==0){return}var c=APP_XMENU.get_margin_left(f);if(b.outerWidth()<=d.outerWidth()){d.css("left","0");d.css("right","0")}else{if(b.outerWidth()-a(f).position().left-c<d.outerWidth()){d.css("left","auto");d.css("right","0")}else{d.css("left",(a(f).position().left+c)+"px");d.css("right","auto")}}},process_position_center_menu_parent:function(g){var f=a(g);var b=a("header.main-header .x-nav-menu");while((b.prop("tagName")!="BODY")&&(b.css("position")=="static")){b=b.parent()}var e=a("> ul.x-sub-menu",f);if(e.length==0){return}if(b.outerWidth()<=e.outerWidth()){e.css("left","0");e.css("right","0")}else{var c=APP_XMENU.get_margin_left(g);var d=(e.outerWidth()-f.outerWidth()-c)/2;if(d>a(g).position().left){e.css("left","0");e.css("right","auto")}else{if(d>b.outerWidth()-a(g).outerWidth()-a(g).position().left){e.css("left","auto");e.css("right","0")}else{e.css("left",(a(g).position().left-d)+"px");e.css("right","auto")}}}},process_position_left_menu_bar:function(d){var c=a(d);var b=a("> ul.x-sub-menu",c);b.css("left","0");b.css("right","auto")},process_position_right_menu_bar:function(d){var c=a(d);var b=a("> ul.x-sub-menu",c);b.css("left","auto");b.css("right","0")},is_desktop:function(){var c=991;var b=a("body");if((typeof(b.attr("data-breakpoint"))!="undefined")&&!isNaN(parseInt(b.attr("data-breakpoint"),10))){c=parseInt(b.attr("data-breakpoint"),10)}return window.matchMedia("(min-width: "+(c+1)+"px)").matches}};a(document).ready(function(){APP_XMENU.initialize()})})(jQuery);